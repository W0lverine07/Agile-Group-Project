<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>User Profile | Wellness Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles_account.css') }}"/>
    <!-- Font Awesome for the icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<!-- Animated background - Red particles -->
<div class="particles"></div>
<div class="blur-bg"></div>

<header>
    <div class="left-header">
    <a href="{{ url_for('main.home') }}" class="logo-link">
        <img src="https://i.pinimg.com/originals/6d/e1/7f/6de17f9493638040838c12f4c947365b.gif"
             alt="Wellness Tracker Logo" class="logo">
    </a>
    <h1>Wellness Tracker</h1>
    </div>
    <div class="nav-buttons">
        <a href="{{ url_for('main.dashboard') }}"><button><i class="fas fa-chart-line"></i> Dashboard</button></a>
        <a href="{{ url_for('main.gallery') }}"><button><i class="fas fa-image"></i> Gallery</button></a>
        <a href="{{ url_for('main.faqs') }}"><button><i class="fas fa-question-circle"></i> FAQ's</button></a>
        <a href="{{ url_for('main.history') }}"><button><i class="fas fa-history"></i> History</button></a>
    </div>
</header>

<main>
    <div class="profile-container">
        <!-- Profile view - card format (Glassmorphism) -->
        <div class="profile-card">
            <div class="profile-header">
                <div class="avatar-container">
                    <img id="avatarPreview" src="{{ user.avatar_url or 'https://api.dicebear.com/9.x/adventurer/svg?seed=Unknown' }}" class="avatar-img">
                    <div id="editAvatarIcon" class="edit-avatar-icon" style="display: none;">
                        <i class="fas fa-pen"></i>
                    </div>
                </div>

                <h2>{{ user.first_name }} {{ user.last_name }}</h2>
                <p class="email">{{ user.email }}</p>
            </div>

            <div class="profile-details">
                <div class="detail-group">
                    <span class="detail-label"><i class="fas fa-user-tag"></i> Username</span>
                    <span class="detail-value">{{ user.username }}</span>
                </div>
                <div class="detail-group">
                    <span class="detail-label"><i class="fas fa-tint"></i> Blood Group</span>
                    <span class="detail-value">{{ user.blood_group }}</span>
                </div>
                <div class="detail-group">
                    <span class="detail-label"><i class="fas fa-birthday-cake"></i> Date of Birth</span>
                    <span class="detail-value">{{ user.dob.strftime('%Y-%m-%d') }}</span>
                </div>
                <div class="detail-group">
                    <span class="detail-label"><i class="fas fa-hourglass-half"></i> Age</span>
                    <span class="detail-value">{{ age }} years</span>
                </div>
                <!-- Weight -->
                <div class="detail-group">
                    <span class="detail-label"><i class="fas fa-weight"></i> Weight</span>
                    <input id="weightInput" type="number" name="weight" class="detail-value custom-input" value="{{ user.weight }}" readonly>
                </div>

                <!-- Height -->
                <div class="detail-group">
                    <span class="detail-label"><i class="fas fa-ruler-vertical"></i> Height</span>
                    <input id="heightInput" type="number" name="height" class="detail-value custom-input" value="{{ user.height }}" readonly>
                </div>

                <!-- Allergies -->
                <div class="detail-group full-width vertical-layout">
                    <span class="detail-label"><i class="fas fa-hand-holding-medical"></i> Allergies</span>
                    <textarea id="allergiesInput" class="detail-value custom-input multi-line" name="allergies" rows="3" readonly>{{ user.allergies }}</textarea>
                </div>

                <!-- Medications -->
                <div class="detail-group full-width vertical-layout">
                    <span class="detail-label"><i class="fas fa-capsules"></i> Medications</span>
                    <textarea id="medicationsInput" class="detail-value custom-input multi-line" name="medications" rows="3" readonly>{{ user.medications }}</textarea>
                </div>

                <div class="detail-group full-width" id="avatarPicker" style="display: none;">
                    <span class="detail-label"><i class="fas fa-image"></i> Select Avatar</span>
                    <div class="avatar-options">
                        {% for seed in ['Maria', 'Rex', 'Luna', 'Nova', 'Kai', 'Yuki', 'Juno'] %}
                        <label class="avatar-label">
                            <input type="radio" name="avatar_url" value="https://api.dicebear.com/9.x/adventurer/svg?seed={{ seed }}">
                            <img src="https://api.dicebear.com/9.x/adventurer/svg?seed={{ seed }}" class="avatar-thumb">
                        </label>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <button class="edit-btn" id="editBtn"><i class="fas fa-edit"></i> Edit Profile</button>
            <button class="edit-btn" id="saveBtn" style="display:none;"><i class="fas fa-save"></i> Save</button>
        </div>

        <div id="avatarModal" class="avatar-modal">
            <div class="avatar-modal-content">
                <h3>Select an Avatar</h3>
                <div class="avatar-options">
                {% for seed in ['Maria', 'Rex', 'Luna', 'Nova', 'Kai', 'Yuki', 'Juno', 'Sawyer', 'Liliana', 'Leo', 'Chase'] %}
                <label class="avatar-label">
                    <input type="radio" name="avatar_url" value="https://api.dicebear.com/9.x/adventurer/svg?seed={{ seed }}">
                    <img src="https://api.dicebear.com/9.x/adventurer/svg?seed={{ seed }}" class="avatar-thumb">
                </label>
                {% endfor %}
                </div>
                <button id="closeAvatarModal">Close</button>
            </div>
        </div>


        <!-- Stats Widgets -->
        <div class="stats-grid">
            <div class="stat-card">
            <i class="fas fa-fire" style="color: #FF3E3E;"></i>
            <h3>Avg Weekly Calories</h3>
            <p>{{ avg_calories }} <span>kcal</span></p>
            </div>
            <div class="stat-card">
            <i class="fas fa-clock" style="color: #FF3E3E;"></i>
            <h3>Daily Active Time</h3>
            <p>{{ avg_active_time }} <span>mins</span></p>
            </div>
            <div class="stat-card">
            <i class="fas fa-star" style="color: #FF3E3E;"></i>
            <h3>Activity of the Week</h3>
            <p>{{ activity_of_week }}</p>
             </div>
        </div>
    </div>
</main>
<script src="{{ url_for('static', filename='js/edit_account.js') }}"></script>
</body>
</html>