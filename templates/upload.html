<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Record Activity | Wellness Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles_upload.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/script_upload.js') }}" defer></script>
</head>
<body>
  <header>
    <div class="left-header">
    <a href="{{ url_for('main.home') }}" class="logo-link">
        <img src="https://i.pinimg.com/originals/6d/e1/7f/6de17f9493638040838c12f4c947365b.gif"
             alt="Wellness Tracker Logo" class="logo">
    </a>
    <h1>Wellness Tracker</h1>
    </div>
    <div class="nav-buttons">
        <a href="{{ url_for('main.dashboard') }}"><button><i class="fas fa-chart-line"></i> Dashboard</button></a>
        <a href="{{ url_for('main.visualize') }}"><button><i class="fas fa-chart-pie"></i> Analytics</button></a>
        <a href="{{ url_for('main.share_page') }}"><button><i class="fas fa-share"></i> Share</button></a>
        <a href="{{ url_for('main.faqs') }}"><button><i class="fas fa-question-circle"></i> FAQ's</button></a>
        <a href="{{ url_for('main.logout') }}"><button class="logout-btn"><i class="fa-solid fa-arrow-right-from-bracket"></i> Logout</button></a>
    </div>
  </header>

  <main class="content">
    <h2>Record Your Activity</h2>

    <form action="{{ url_for('main.upload_data') }}" method="POST">
        
        <div class="form-group">
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" value="{{ today }}" required>
        </div>

        <div class="form-group">
            <label for="exercise_type">Exercise Type:</label>
            <select id="exercise_type" name="exercise_type" required>
                <option value="" disabled selected>Select an exercise</option>
                {% for exercise in exercise_types %}
                <option value="{{ exercise.id }}" data-rate="{{ exercise.calories_per_minute }}">{{ exercise.name }}</option>
                {% endfor %}
            </select>
            <div class="input-helper">What type of exercise did you do?</div>
        </div>

        <div class="form-group">
            <label for="duration">Duration (minutes):</label>
            <input type="number" id="duration" name="duration" min="1" max="999" placeholder="e.g. 30" required>
            <div class="input-helper">How long did you exercise?</div>
        </div>

        <div class="form-group">
            <label for="calories">Calories Burnt:</label>
            <input type="number" id="calories" name="calories" min="0" max="10000" placeholder="Auto-calculated" readonly>
            <div class="input-helper">Automatically calculated from exercise type and duration</div>
        </div>

        <div class="form-actions">
            <button type="submit" class="submit-btn">Save Activity</button>
            <button type="button" class="import-btn" id="importDataBtn">Import from Device</button>
        </div>
    </form>

    <!-- Device Import Modal -->
    <div id="deviceModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Import from Device</h3>
            
            <div class="device-selection">
                <div class="device" data-device="fitbit">
                    <img src="https://img.icons8.com/color/96/000000/fitbit.png" alt="Fitbit">
                    <span>Fitbit</span>
                </div>
                <div class="device" data-device="apple">
                    <img src="https://img.icons8.com/color/96/000000/apple-watch.png" alt="Apple Watch">
                    <span>Apple Watch</span>
                </div>
                <div class="device" data-device="garmin">
                    <img src="https://img.icons8.com/color/96/000000/garmin.png" alt="Garmin">
                    <span>Garmin</span>
                </div>
                <div class="device" data-device="samsung">
                    <img src="https://img.icons8.com/color/96/000000/samsung.png" alt="Samsung Health">
                    <span>Samsung Health</span>
                </div>
            </div>
            
            <div class="connection-status">
                <p id="connectionMessage">Select a device to connect</p>
                <div id="loadingSpinner" class="spinner" style="display: none;"></div>
            </div>
            
            <div class="modal-actions">
                <button id="connectBtn" disabled>Connect</button>
                <button id="cancelBtn">Cancel</button>
            </div>
        </div>
    </div>
  </main>
</body>
</html>