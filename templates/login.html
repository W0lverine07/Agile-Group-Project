<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitTrack - Login/Register</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    
<header>
    <div class="left-header">
    <a href="{{ url_for('main.home') }}" class="logo-link">
        <img src="https://i.pinimg.com/originals/6d/e1/7f/6de17f9493638040838c12f4c947365b.gif"
             alt="Wellness Tracker Logo" class="logo">
    </a>
    <h1>Wellness Tracker</h1>
    </div>

        <div class="nav-buttons">
            <a href="{{ url_for('main.home') }}"><button><i class="fas fa-house"></i> Home Page</button></a>

            <div class="dropdown">
            <button class="dropbtn"><i class="fas fa-chart-line"></i> Dashboard</button>
            <div class="dropdown-content">
                <a href="{{ url_for('main.dashboard') }}"><button><i class="fas fa-chart-line"></i> Dashboard</button></a>
                <a href="{{ url_for('main.upload') }}"><i class="fas fa-upload"></i> Record Activity</a>
                <a href="{{ url_for('main.visualize') }}"><i class="fas fa-chart-pie"></i> View Analytics</a>
                <a href="{{ url_for('main.share_page') }}"><i class="fas fa-share"></i> Share Activity</a>
            </div>
        </div>


       <div class="dropdown">
            <button class="dropbtn"><i class="fas fa-bars"></i> More</button>
            <div class="dropdown-content">
                <a href="{{ url_for('main.gallery') }}"><i class="fas fa-image"></i> Gallery</a>
                <a href="{{ url_for('main.faqs') }}"><i class="fas fa-question-circle"></i> FAQ's</a>
                <a href="{{ url_for('main.history') }}"><i class="fas fa-history"></i> History</a>
                <a href="{{ url_for('main.contact') }}"><i class="fas fa-phone"></i> Contact Us</a>
            </div>
        </div>
    </div>
</header>
    <script id="flash-messages" type="application/json">
        {{ get_flashed_messages(with_categories=true) | tojson }}
    </script>
<script>
  setTimeout(() => {
    document.querySelectorAll('.flash-message').forEach(el => {
      el.style.transition = "opacity 0.5s ease-out";
      el.style.opacity = 0;
      setTimeout(() => el.remove(), 500); 
    });
  }, 1000); 
</script>

<!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
          <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
    {% endwith %}

<!-- Main Content Area -->
<div class="auth-container">
    <div class="auth-card">
        <!-- Form Switcher -->
        <div class="form-switcher">
            <button class="switch-btn active" data-form="login">Login</button>
            <button class="switch-btn" data-form="register">Register</button>
        </div>

        <!-- Login Form -->
        <div class="form-container" id="login-form">
            <h1>Welcome Back</h1>
            <p class="subtitle">Continue your fitness journey</p>

            <form action="{{ url_for('main.login') }}" method="POST"> <!-- since the entered password and username is checked using User.check_password() -->
                <div class="input-group">
                    <div class="input-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <input type="text" name="username" placeholder="Username" required>
                </div>

                <div class="input-group">
                    <div class="input-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <input type="password" name="password" placeholder="Password" required>
                </div>

                <div class="form-footer">
                    <a href="#" class="forgot-password" onclick="showForgotPassword()">Forgot password?</a>
                </div>

                <button type="submit" class="submit-btn">
                    <span>Login</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
        </div>

        <!-- Register Form -->
        <div class="form-container hidden" id="register-form">
            <h1>Create Account</h1>
            <p class="subtitle">Start your fitness journey</p>

            <form action="{{ url_for('main.register') }}" method="POST">
                <div class="input-group">
                    <div class="input-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <input type="text" id="username" name="username" placeholder="Choose a username" required>
                </div>
                <small id="username-feedback" class="feedback-text"></small>

                <div class="input-group">
                    <div class="input-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <input type="password" name="password" id="password" placeholder="Create password" required>
                </div>

                <div class="input-group">
                    <div class="input-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm password"
                           required>
                </div>

                <div class="checkbox-container terms-checkbox">
                    <input type="checkbox" id="terms" name="terms" required>
                    <label for="terms">
                        I agree to the 
                        <a href="#" onclick="showPopup('terms')">Terms of Service</a> and 
                        <a href="#" onclick="showPopup('privacy')">Privacy Policy</a>
                    </label>
                </div>

                <button type="submit" class="submit-btn">
                    <span>Create Account</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- Features Showcase -->
    <div class="features">
        <div class="feature">
            <div class="feature-icon">
                <i class="fas fa-running"></i>
            </div>
            <h3>Track All Activities</h3>
            <p>Manage all your fitness activities in one place</p>
        </div>

        <div class="feature">
            <div class="feature-icon">
                <i class="fas fa-medal"></i>
            </div>
            <h3>Unlock Achievements</h3>
            <p>Earn rewards and badges as you reach fitness milestones</p>
        </div>

        <div class="feature">
            <div class="feature-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <h3>Data Analysis</h3>
            <p>Get detailed statistics and progress reports</p>
        </div>

        <div class="feature">
            <div class="feature-icon">
                <i class="fas fa-users"></i>
            </div>
            <h3>Community Sharing</h3>
            <p>Share your progress and achievements with friends</p>
        </div>
    </div>
</div>

<!-- Popup Modal HTML -->
<div id="popup-modal" class="modal hidden">
  <h3 id="popup-title" style="margin-top: 0;"></h3>
  <p id="popup-content"></p>
  <button onclick="closePopup()" class="modal-close-btn">Close</button>
</div>

<!-- Forgot Password Modal -->
<div id="forgot-modal" class="modal hidden forgot-reset-modal">
  <h3 class="modal-title">Forgot Password</h3>
  <p class="modal-subtitle">Enter your username and registered email:</p>
  <input type="text" id="forgot-username" placeholder="Username" class="input-field" />
  <input type="email" id="forgot-email" placeholder="Email" class="input-field" />
  <button onclick="verifyForgotDetails()" class="modal-action-btn">Verify</button>
</div>

<!-- Reset Password Modal -->
<div id="reset-modal" class="modal hidden forgot-reset-modal">
  <h3 class="modal-title">Reset Password</h3>
  <input type="password" id="new-password" placeholder="New Password" class="input-field" />
  <input type="password" id="confirm-password" placeholder="Confirm Password" class="input-field" />
  <button onclick="resetPassword()" class="modal-action-btn">Update Password</button>
</div>


<div id="modal-overlay" class="modal-overlay hidden" onclick="closePopup()"></div>

<script src="{{ url_for('static', filename='js/check_username.js') }}"></script>
<script src="{{ url_for('static', filename='js/forgot_password.js') }}"></script>

</body>
</html>